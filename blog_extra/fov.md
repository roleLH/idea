>  ç©ºç©ºå¦‚ä¹Ÿ æœ‰çš„æ—¶å€™ä¹ŸæŒ‡è„‘å­

### å‰è¨€
æœ€ä¸€å¼€å§‹æ˜¯çœ‹ [roguelike](http://www.roguebasin.com/index.php/Articles) ç³»åˆ—ï¼Œæœ‰ç‚¹å¥½å¥‡æ˜¯æ€ä¹ˆå®ç°çš„ï¼Œå°±åœ¨è¿™é‡Œè®°å½•ä¸‹ã€‚
å…¨æ–‡å‚è€ƒäº†[è¿™ç¯‡æ–‡ç« ](https://legends2k.github.io/2d-fov/design.html)(å…¶å®å°±æ˜¯ç¿»è¯‘ä¸€ä¸‹ï¼Œæ–‡åŒ–äººçš„äº‹èƒ½å«æŠ„å—ğŸ¤ª)


-----
é¦–å…ˆè€ƒè™‘æœ€ç®€å•çš„æ¨¡å‹ï¼Œæ£€æµ‹**ä¸€æ¡å°„çº¿ä¸ä¸€æ¡çº¿æ®µ**ç›¸äº¤ã€‚  
ä¸€ç§å¸¸ç”¨çš„åˆ¤å®šæ–¹æ³•æ˜¯ç”¨äºŒè€…çš„å‚æ•°æ–¹ç¨‹ã€‚  

çº¿æ®µçš„ä¸¤ä¸ªé¡¶ç‚¹ A$(x_0, y_0)$ B$(x_1, y_1)$
$$ \begin{cases}
    x_{segment} = x_0 + (x_1 - x_0) t_1 \\
    y_{segment} = y_0 + (y_1 - y_0) t_1 \\
\end{cases}
(0 < t_1 < 1)
$$

å°„çº¿çš„ä¸€ä¸ªé¡¶ç‚¹C$(x_2, y_2)$ å¦å¤–ä¸€ä¸ªç‚¹D$(x_3, y_3)$ å¯ä»¥å–å°„çº¿ä¸Šçš„ä»»æ„ä¸€ç‚¹
$$ \begin{cases}
    x_{ray} = x_2 + (x_3 - x_2) t_2 \\
    y_{ray} = y_2 + (y_3 - y_2) t_2 \\
\end{cases}
(t_2 > 0)
$$
äºŒè€…ç›¸äº¤çš„æ¡ä»¶å°±æ˜¯ 
$$ 
\begin{cases}
    x_{segment} = x_{ray} \\
    y_{segment} = y_{ray} \\
\end{cases}
$$
æ–¹ç¨‹è”ç«‹è§£å‡ºæœ‰æ•ˆçš„$t_1$, $t_2$ï¼Œé‚£ä¹ˆå°±å¯ä»¥è¯´æ˜å°„çº¿ä¸çº¿æ®µç›¸äº¤äº†ã€‚








----
#### ç›´çº¿çš„å‚æ•°æ–¹ç¨‹
å®šä¹‰ å®šç‚¹A$(x_0,y_0)$ï¼Œ$\theta$ ä¸ºç›´çº¿ä¸xè½´æ­£æ–¹å‘å¤¹è§’ï¼Œé‚£ä¹ˆåŠ¨ç‚¹P$(x, y)$ ä¸å‚æ•°$t$ æ„æˆçš„æ–¹ç¨‹ä¸ºï¼š
$$ \begin{cases}
    x = x_0 + t \cos \theta \\
    y = y_0 + t \sin \theta \\
\end{cases} $$
æ‰€æœ‰çš„è¿™æ ·çš„ç‚¹Pæ„æˆäº†è¿™æ¡ç›´çº¿





